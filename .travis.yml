language: node_js
node_js: stable
before_install:
- openssl aes-256-cbc -K $encrypted_dba9ef1083b2_key -iv $encrypted_dba9ef1083b2_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv d67271d8.md source/_posts/
install:
- npm install
script:
- gulp
- mv id_rsa $HOME/.ssh/id_rsa
- chmod +x deploy
- "./deploy"
- cat $HOME/.ssh/ssh_known_hosts
after_script:
- cd ./public
- git init
- git add .
- git commit -m "Travis CI Auto Builder"
- git push --force --quiet "https://${REPO_TOKEN}@${GH_REF}" master:master
branches:
  only:
  - hexo
env:
  global:
  - GH_REF: github.com/WincerChan/WincerChan.github.io.git
addons:
  ssh_known_hosts:
    secure: "KvBuDbw+RLBVqiPYubafRJ2dDKbimUF7mqqYiImUrjtmc31oPiSh0edCxF1HMWkwn1qaobpXkkI1qp4ooHrfhVP70/y4YNnC0VZ2zF8zaN9ByaWEDCTiJDtIfeoR+oVT8x1T3uRB68r1eA5pjmuUbM1OV0WKapzOEE0YRnkZp9Kjn74jQTXWiBePM7uc4u68pSlAqPZKmwn2hbFQ+3h6z8BYg6pHEBvzBpUdKCjCi4klkDMQjJNE8p3DxzxJ1KtlstXN/+h6hJsX+e4GPcmkYrBM3VRHodMOSe+2poXRxGy3RZI/taKyh7wle9D1xxOvi4DmzyYeQbgtg7Cg3WiDWUsGolNHdG9jtzMsna0M93PyQdEwQGQOS4af5wtFXQLK/Xex826vYpoCVgr/CEAZAd9sSpB3wmvreJ0stmBDkw2G3sfvhzZNA2h8mRv6o1rG+Rl3ZTJ9Rt8Bq3fkh85Tz+04+eR3KRPjfIWvmLj3qm+H5evZyO2GkjvibdtX27FRrEGE+GwICIlQcOpBCib3jZDcPPjcBNb9io0LPZKJZW992Uji5mp5do29klL8jnAsvCTEKBu3DTX6oTaBnz+XRPOaMVdyAnV/M9Xa+vCz12AzkI3AMtJCq+EmBkT8ZRIS49bQ43f6Gye2xYdgykrJFTaxXRjhGUmRuVYYY3S73I8="
